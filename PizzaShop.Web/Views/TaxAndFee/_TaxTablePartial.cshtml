@model List<PizzaShop.Entity.Data.TaxesAndFee>;

<div class="table-responsive mt-3 rounded shadow p-2 bg-white">
    <table class="table" id="tbl">
        <thead>
            <tr>
                <th>Name</th>
                <th>Type</th>
                <th>IsEnabled</th>
                <th>Default</th>
                <th>TaxValue</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var tax in Model)
            {
                <tr>
                    <td>@Html.DisplayFor(modelItem => tax.Name)</td>
                    <td>
                        @if (tax.Type == true)
                        {
                            <p style="margin: 0;">Percentage</p>
                        }
                        else
                        {
                            <p style="margin: 0;">Flat Amount</p>
                        }
                    </td>
                    <td>
                        <div class="form-check form-switch">
                            <input class="form-check-input" type="checkbox" id="flexSwitchCheckChecked"
                                   @(tax.IsActive == true ? "checked" : "")>
                        </div>
                    </td>
                    <td>
                        <div class="form-check form-switch">
                            <input class="form-check-input isDefaultSwitch" type="checkbox" id="flexSwitchCheckChecked"
                                   @(tax.IsDefault == true ? "checked" : "")>
                        </div>
                    </td>
                    <td>
                        @if (tax.Type == true)
                        {
                            @Html.DisplayFor(modelItem => tax.TaxValue)
                            <span>%</span>
                        }
                        else
                        {
                            <span>â‚¹</span>
                            @Html.DisplayFor(modelItem => tax.TaxValue)
                        }
                    </td>
                    <td>
                        <a href="javascript:void(0);" style="text-decoration: none; color: inherit;"
                           class="edit-tax" data-id="@tax.Id">
                            <i class="fa-solid fa-pen-clip m-1"></i>
                        </a>
                        @* <a href="javascript:void(0)" onclick="confirmDelete(@tax.Id)"
                           style="text-decoration: none; color: inherit;">
                            <i class="fa-solid fa-trash m-1"></i>
                        </a> *@
                        <a href="javascript:void(0);" class="delete-btn" data-id="@tax.Id">
                            <i class="fa-solid fa-trash m-1"></i>
                        </a>
                    </td>
                </tr>
            }
        </tbody>
    </table>
</div>
    <script>
        $(document).ready(function () {
   
       // Open Delete Confirmation Modal
            $(".delete-btn").click(function () {
                deleteTaxId = $(this).data("id");
                console.log("TaxId", deleteTaxId)
                $('#deleteModal').modal('show');
            });
     function handleAjaxError(xhr, status, error) {
        if (xhr.status === 401) {
            toastr.error("You are not authenticated. Please log in.");
        } else if (xhr.status === 403) {
            toastr.error(xhr.responseJSON && xhr.responseJSON.message ? xhr.responseJSON.message : "You are not authorized to perform this action.");
            $('.modal-backdrop').remove();
        } else {
            toastr.error("An error occurred while processing your request. Please try again.");
            console.error("Error details:", status, error, xhr.responseText);
        }
    }
});
</script>
